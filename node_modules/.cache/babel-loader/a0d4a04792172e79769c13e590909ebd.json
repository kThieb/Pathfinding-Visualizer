{"ast":null,"code":"import _objectSpread from\"/home/kevin/Documents/Projects/Simple-Visualizer/pathfinding-visualizer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/kevin/Documents/Projects/Simple-Visualizer/pathfinding-visualizer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import\"./Visualizer.css\";import{Grid}from\"../Grid/Grid\";import{NavBar,NavItem,DropDownMenu,DropDownItem,DropDownSlider,NavButton,DropDownToggleSwich}from\"../NavBar/NavBar\";import{node}from\"../helperFunctions/usefulInterfaces\";import{singleTargetAlgorithms,multipleTargetsAlgorithms}from\"../helperFunctions/shortestPathAlgorithms/allAlgorithms\";import{generateMazeGraph}from\"../helperFunctions/mazeGenerators/mazeGraph\";import{addPiecesOfCheese,constructGrid,reconstructGrid}from\"../helperFunctions/constructGrid\";import{WrapperCSSTransition}from\"../Wrapper/Wrapper\";var NUMBER_OF_COLUMNS=28;var NUMBER_OF_ROWS=13;var VISITED_ANIMATION_TIMEOUT=35;var PATH_ANIMATION_TIMEOUT=125;// We define these constants out of the functional component\n// that the App uses to avoid re-running the functions to create\n// these each time there is a re-render\nvar _constructGrid=constructGrid(NUMBER_OF_COLUMNS,NUMBER_OF_ROWS,[6,3],[6,24],0),_constructGrid2=_slicedToArray(_constructGrid,3),firstGrid=_constructGrid2[0],firstStartNode=_constructGrid2[1],firstTargetList=_constructGrid2[2];var _generateMazeGraph=generateMazeGraph(NUMBER_OF_COLUMNS,NUMBER_OF_ROWS,firstGrid,0.3,0.3,2),_generateMazeGraph2=_slicedToArray(_generateMazeGraph,2),firstpairGrid=_generateMazeGraph2[0],mazeGraph=_generateMazeGraph2[1];// Component rendering everything in the webpage.\nvar Visualizer=function Visualizer(){var gridRef=useRef(firstGrid);// States managing the grid\nvar _useState=useState(firstGrid),_useState2=_slicedToArray(_useState,2),grid=_useState2[0],setGrid=_useState2[1];var _useState3=useState(firstpairGrid),_useState4=_slicedToArray(_useState3,2),pairGrid=_useState4[0],setPairGrid=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),isVisualized=_useState6[0],setIsVisualized=_useState6[1];// States managing the maze\nvar _useState7=useState(mazeGraph),_useState8=_slicedToArray(_useState7,2),maze=_useState8[0],setMaze=_useState8[1];var _useState9=useState(0.3),_useState10=_slicedToArray(_useState9,2),wallsDensity=_useState10[0],setWallsDensity=_useState10[1];var _useState11=useState(0.3),_useState12=_slicedToArray(_useState11,2),mudDensity=_useState12[0],setMudDensity=_useState12[1];var _useState13=useState(2),_useState14=_slicedToArray(_useState13,2),mudWeight=_useState14[0],setMudWeight=_useState14[1];var _useState15=useState(1),_useState16=_slicedToArray(_useState15,2),numberOfTargets=_useState16[0],setNumberOfTargets=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),shouldGenerateMaze=_useState18[0],setShouldGenerateMaze=_useState18[1];var didMount=useRef(false);var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),showNumbers=_useState20[0],setShowNumbers=_useState20[1];// States of the start and end nodes\nvar _useState21=useState(firstStartNode),_useState22=_slicedToArray(_useState21,2),startNode=_useState22[0],setStartNode=_useState22[1];var _useState23=useState(firstTargetList),_useState24=_slicedToArray(_useState23,2),targetList=_useState24[0],setTargetList=_useState24[1];// States managing the dropdown menu\nvar _useState25=useState(\"main-single-target\"),_useState26=_slicedToArray(_useState25,2),algoActiveMenu=_useState26[0],setAlgoActiveMenu=_useState26[1];var _useState27=useState(\"Dijkstra's algorithm\"),_useState28=_slicedToArray(_useState27,2),singleTargetAlgorithm=_useState28[0],setSingleTargetAlgorithm=_useState28[1];var _useState29=useState(\"Nearest Neighbors (Greedy)\"),_useState30=_slicedToArray(_useState29,2),multipleTargetsAlgorithm=_useState30[0],setMultipleTargetsAlgorithm=_useState30[1];var _useState31=useState(undefined),_useState32=_slicedToArray(_useState31,2),height=_useState32[0],setHeight=_useState32[1];// State of the mouse\nvar _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),mouseIsPressed=_useState34[0],setMouseIsPressed=_useState34[1];// This function is there to visualize the algorithm chosen in the drop down menu\nvar visualizeSingleTargetAlgorithm=function visualizeSingleTargetAlgorithm(visited,path,timeout){var n=visited.length;var _loop=function _loop(i){setTimeout(function(){var newGrid=gridRef.current.slice();var node=visited[i];// define the x and y of the current node\nvar x=node.x;var y=node.y;newGrid[x][y]=_objectSpread(_objectSpread({},gridRef.current[x][y]),{},{isVisited:true});setGrid(newGrid);},timeout+VISITED_ANIMATION_TIMEOUT*i);};for(var i=0;i<n;i++){_loop(i);}var m=path.length;var _loop2=function _loop2(_i){setTimeout(function(){var newGrid=gridRef.current.slice();var successor=_i<m-1?path[_i+1]:path[_i];var node=path[_i];// define the x and y of the current node\nvar x=node.x;var y=node.y;newGrid[x][y]=_objectSpread(_objectSpread({},gridRef.current[x][y]),{},{isShortestPath:true,isVisited:false,successorPosition:getSuccessorPosition(node,successor)});setGrid(newGrid);},timeout+VISITED_ANIMATION_TIMEOUT*n+PATH_ANIMATION_TIMEOUT*_i+500);};for(var _i=0;_i<m;_i++){_loop2(_i);}return timeout+VISITED_ANIMATION_TIMEOUT*n+PATH_ANIMATION_TIMEOUT*m;};// This function returns the position of the successor of a node in the shortest path\nvar getSuccessorPosition=function getSuccessorPosition(node,successor){if(node.x+1===successor.x)return\"D\";if(node.y+1===successor.y)return\"R\";if(node.x-1===successor.x)return\"U\";if(node.y-1===successor.y)return\"L\";return\"\";};// This function is there to visualize multipleTargetsAlgorithms\nvar visualizeMultipleTargetsAlgorithm=function visualizeMultipleTargetsAlgorithm(allVisitedAndPathsArray){var n=allVisitedAndPathsArray.length;var currentTimeout=0;for(var i=0;i<n;i++){var _allVisitedAndPathsAr=_slicedToArray(allVisitedAndPathsArray[i],2),_visited=_allVisitedAndPathsAr[0],_path=_allVisitedAndPathsAr[1];currentTimeout=visualizeSingleTargetAlgorithm(_visited,_path,currentTimeout);currentTimeout+=1250;setTimeout(function(){var newGrid=gridRef.current.slice();for(var _x=0;_x<newGrid.length;_x++){for(var _y=0;_y<newGrid[0].length;_y++){newGrid[_x][_y]=_objectSpread(_objectSpread({},gridRef.current[_x][_y]),{},{isVisited:false});}}setGrid(newGrid);},currentTimeout);currentTimeout+=1000;}return currentTimeout;};// This function is passed to the drop down menu to handle the change of algorithm\nvar handleAlgorithmChange=function handleAlgorithmChange(algorithmName){return function(){numberOfTargets>1?setMultipleTargetsAlgorithm(algorithmName):setSingleTargetAlgorithm(algorithmName);};};// This function handles the click on the menu buttons\nvar handleMenuChange=function handleMenuChange(menuName){return function(){return setAlgoActiveMenu(menuName);};};// This function handles the logic of the visualization of the algorithms\nvar handleVisualization=function handleVisualization(){if(isVisualized===0){setIsVisualized(1);if(numberOfTargets===1){var _singleTargetAlgorith=singleTargetAlgorithms[singleTargetAlgorithm](grid,pairGrid,maze,startNode,targetList),_singleTargetAlgorith2=_slicedToArray(_singleTargetAlgorith,2),_visited2=_singleTargetAlgorith2[0],_path2=_singleTargetAlgorith2[1];var n=_visited2.length,m=_path2.length;visualizeSingleTargetAlgorithm(_visited2,_path2,0);setTimeout(function(){setIsVisualized(2);},VISITED_ANIMATION_TIMEOUT*n+PATH_ANIMATION_TIMEOUT*m+1250);return;}var allVisitedAndPaths=multipleTargetsAlgorithms[multipleTargetsAlgorithm](grid,pairGrid,maze,startNode,targetList.slice());var _timeout=visualizeMultipleTargetsAlgorithm(allVisitedAndPaths);setTimeout(function(){setIsVisualized(2);},_timeout);}if(isVisualized===2){reinitializeGrid();}};// This function calls the generate maze function\nvar generateMaze=function generateMaze(){if(isVisualized===0){var _generateMazeGraph3=generateMazeGraph(NUMBER_OF_COLUMNS,NUMBER_OF_ROWS,grid,wallsDensity,mudDensity,mudWeight),_generateMazeGraph4=_slicedToArray(_generateMazeGraph3,2),newPairGrid=_generateMazeGraph4[0],newMaze=_generateMazeGraph4[1];setPairGrid(newPairGrid);setMaze(newMaze);setShouldGenerateMaze(false);}};// Reinitialize the the board\nvar reinitializeGrid=function reinitializeGrid(){if(isVisualized!==1){var _reconstructGrid=reconstructGrid(NUMBER_OF_COLUMNS,NUMBER_OF_ROWS,[startNode.x,startNode.y],targetList),_reconstructGrid2=_slicedToArray(_reconstructGrid,3),newGrid=_reconstructGrid2[0],newStartNode=_reconstructGrid2[1],newTargetList=_reconstructGrid2[2];for(var i=0;i<newGrid.length;i++){for(var j=0;j<newGrid[0].length;j++){gridRef.current[i][j]=newGrid[i][j];}}setGrid(newGrid);setStartNode(newStartNode);setTargetList(newTargetList);setIsVisualized(0);}};// toggles on and off the multiple targets\nvar toggleMultipleTargetGrid=function toggleMultipleTargetGrid(){if(isVisualized!==1){var newGrid,newStartNode,newTargetList;if(numberOfTargets>1){var _addPiecesOfCheese=addPiecesOfCheese(NUMBER_OF_COLUMNS,NUMBER_OF_ROWS,startNode,targetList,numberOfTargets-targetList.length);var _addPiecesOfCheese2=_slicedToArray(_addPiecesOfCheese,3);newGrid=_addPiecesOfCheese2[0];newStartNode=_addPiecesOfCheese2[1];newTargetList=_addPiecesOfCheese2[2];for(var i=0;i<newGrid.length;i++){for(var j=0;j<newGrid[0].length;j++){gridRef.current[i][j]=newGrid[i][j];}}}else{var _constructGrid3=constructGrid(NUMBER_OF_COLUMNS,NUMBER_OF_ROWS,[startNode.x,startNode.y],[6,24],0);var _constructGrid4=_slicedToArray(_constructGrid3,3);newGrid=_constructGrid4[0];newStartNode=_constructGrid4[1];newTargetList=_constructGrid4[2];}setGrid(newGrid);setStartNode(newStartNode);setTargetList(newTargetList);setIsVisualized(0);}};// If the value of multipleTargets change, call the reinitialize function\nuseEffect(toggleMultipleTargetGrid,[numberOfTargets]);// handle the change of the number of targets\nvar handleChangeNumberOfTargets=function handleChangeNumberOfTargets(val){setNumberOfTargets(Math.floor(val));};// handle the click on the multiple targets button\nvar handleMultipleTargets=function handleMultipleTargets(){if(isVisualized===0){setAlgoActiveMenu(numberOfTargets>1?\"main-single-target\":\"main-multiple-target\");setNumberOfTargets(numberOfTargets>1?1:5);}};// toggle the start node in the grid\nvar toggleStartNode=function toggleStartNode(x,y){var _reconstructGrid3=reconstructGrid(NUMBER_OF_COLUMNS,NUMBER_OF_ROWS,[x,y],targetList),_reconstructGrid4=_slicedToArray(_reconstructGrid3,3),newGrid=_reconstructGrid4[0],newStartNode=_reconstructGrid4[1],newTargetList=_reconstructGrid4[2];for(var _x2=0;_x2<newGrid.length;_x2++){for(var _y2=0;_y2<newGrid[0].length;_y2++){gridRef.current[_x2][_y2]=newGrid[_x2][_y2];}}setStartNode(newStartNode);setTargetList(newTargetList);setGrid(newGrid);};// handles the case when the mouse button is down\nvar handleMouseDown=function handleMouseDown(x,y){if(grid[x][y]===startNode){setMouseIsPressed(true);}};// handles the case whan the mouse button is down and you enter a node\nvar handleMouseEnter=function handleMouseEnter(x,y){if(mouseIsPressed){toggleStartNode(x,y);}};// handles the case when you mouse up\nvar handleMouseUp=function handleMouseUp(){setMouseIsPressed(false);};// function that returns the text in the visualization button\nvar getVisualizeText=function getVisualizeText(){if(isVisualized<=0)return\"Visualize \"+(numberOfTargets>1?multipleTargetsAlgorithm:singleTargetAlgorithm)+\"!\";return\"Reinitialize Visualization\";};// updates the maze in real time\nuseEffect(function(){if(didMount.current)setShouldGenerateMaze(true);else didMount.current=true;},[wallsDensity,mudDensity,mudWeight]);// Render the app\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"App\",onMouseUp:function onMouseUp(){return handleMouseUp();}},/*#__PURE__*/React.createElement(NavBar,null,/*#__PURE__*/React.createElement(NavButton,{text:\"Generate New Maze\",isVisualized:isVisualized,className:\"generate-maze \"+(shouldGenerateMaze?\"should-generate\":\"\"),visualizingClassName:\"greyed-out\",visualizedClassName:\"greyed-out\",handleClick:generateMaze}),/*#__PURE__*/React.createElement(NavItem,{text:\"Maze options\",id:\"maze-options\",isVisualized:isVisualized,shouldGreyOut:true},/*#__PURE__*/React.createElement(DropDownMenu,{left:true},/*#__PURE__*/React.createElement(DropDownSlider,{text:\"Density of walls\",minValue:0,maxValue:1,step:0.01,defaultValue:wallsDensity,handleChange:setWallsDensity}),/*#__PURE__*/React.createElement(DropDownSlider,{text:\"Density of mud\",minValue:0,maxValue:1,step:0.01,defaultValue:mudDensity,handleChange:setMudDensity}),/*#__PURE__*/React.createElement(DropDownSlider,{text:\"Mud Weight\",minValue:1.1,maxValue:3,step:0.1,defaultValue:mudWeight,handleChange:setMudWeight}),/*#__PURE__*/React.createElement(DropDownToggleSwich,{text:\"Show Mud Weights ?\",shouldShowWeights:showNumbers,handleChange:function handleChange(){return setShowNumbers(!showNumbers);}}),numberOfTargets>1&&/*#__PURE__*/React.createElement(DropDownSlider,{text:\"Number of Targets\",minValue:2,maxValue:10,step:1,defaultValue:numberOfTargets,handleChange:handleChangeNumberOfTargets}))),/*#__PURE__*/React.createElement(NavButton,{text:getVisualizeText(),isVisualized:isVisualized,className:\"visualize-button\",visualizingClassName:\"greyed-out highlight\",visualizedClassName:\"highlight\",handleClick:handleVisualization}),/*#__PURE__*/React.createElement(NavButton,{text:(numberOfTargets>1?\"Disable\":\"Enable\")+\" Multiple Targets\",isVisualized:isVisualized,className:numberOfTargets>1?\"disable-multiple-targets\":\"enable-multiple-targets\",visualizingClassName:\"greyed-out\",visualizedClassName:\"greyed-out\",handleClick:handleMultipleTargets}),/*#__PURE__*/React.createElement(NavItem,{text:\"Algorithms\",id:\"algorithms\",isVisualized:isVisualized,shouldGreyOut:false},/*#__PURE__*/React.createElement(DropDownMenu,{height:height},/*#__PURE__*/React.createElement(WrapperCSSTransition,{in:algoActiveMenu===\"main-single-target\",unmountOnExit:true,timeout:500,classNames:\"menu-primary\",handleEnter:setHeight,appear:true},/*#__PURE__*/React.createElement(DropDownItem,{handleClick:handleMenuChange(\"unweighted\")},\"Algorithms for unweighted graphs\"),/*#__PURE__*/React.createElement(DropDownItem,{handleClick:handleMenuChange(\"weighted\")},\"Algorithms for weighted graphs\")),/*#__PURE__*/React.createElement(WrapperCSSTransition,{in:algoActiveMenu===\"unweighted\",unmountOnExit:true,timeout:500,classNames:\"menu-unweighted\",handleEnter:setHeight},/*#__PURE__*/React.createElement(DropDownItem,{handleClick:handleMenuChange(\"main-single-target\")},\"<<<\"),/*#__PURE__*/React.createElement(DropDownItem,{handleClick:handleAlgorithmChange(\"Depth First Search\")},/*#__PURE__*/React.createElement(\"p\",null,\"Random Depth First Search\"),singleTargetAlgorithm===\"Depth First Search\"?/*#__PURE__*/React.createElement(\"p\",null,\"\\u2713\"):\"\"),/*#__PURE__*/React.createElement(DropDownItem,{handleClick:handleAlgorithmChange(\"Breadth First Search\")},/*#__PURE__*/React.createElement(\"p\",null,\"Breadth First Search\"),singleTargetAlgorithm===\"Breadth First Search\"?/*#__PURE__*/React.createElement(\"p\",null,\"\\u2713\"):\"\")),/*#__PURE__*/React.createElement(WrapperCSSTransition,{in:algoActiveMenu===\"weighted\",unmountOnExit:true,timeout:500,classNames:\"menu-weighted\",handleEnter:setHeight},/*#__PURE__*/React.createElement(DropDownItem,{handleClick:handleMenuChange(\"main-single-target\")},\"<<<\"),/*#__PURE__*/React.createElement(DropDownItem,{handleClick:handleAlgorithmChange(\"Dijkstra's algorithm\")},/*#__PURE__*/React.createElement(\"p\",null,\"Dijkstra's Algorithm\"),singleTargetAlgorithm===\"Dijkstra's algorithm\"?/*#__PURE__*/React.createElement(\"p\",null,\"\\u2713\"):\"\"),/*#__PURE__*/React.createElement(DropDownItem,{handleClick:handleAlgorithmChange(\"A* algorithm\")},/*#__PURE__*/React.createElement(\"p\",null,\"A* Algorithm\"),singleTargetAlgorithm===\"A* algorithm\"?/*#__PURE__*/React.createElement(\"p\",null,\"\\u2713\"):\"\")),/*#__PURE__*/React.createElement(WrapperCSSTransition,{in:algoActiveMenu===\"main-multiple-target\",unmountOnExit:true,timeout:500,classNames:\"menu-unweighted\",handleEnter:setHeight},/*#__PURE__*/React.createElement(DropDownItem,{handleClick:handleAlgorithmChange(\"Nearest Neighbors (Greedy)\")},/*#__PURE__*/React.createElement(\"p\",null,\"Nearest Neighbors (Greedy)\"),multipleTargetsAlgorithm===\"Nearest Neighbors (Greedy)\"?/*#__PURE__*/React.createElement(\"p\",null,\"\\u2713\"):\"\"))))),/*#__PURE__*/React.createElement(Grid,{grid:grid,pairGrid:pairGrid,maze:maze,mouseState:mouseIsPressed,handleMouseDown:handleMouseDown,handleMouseEnter:handleMouseEnter,showNumbers:showNumbers}));};export default Visualizer;","map":{"version":3,"sources":["/home/kevin/Documents/Projects/Simple-Visualizer/pathfinding-visualizer/src/Visualizer/Visualizer.tsx"],"names":["React","useEffect","useRef","useState","Grid","NavBar","NavItem","DropDownMenu","DropDownItem","DropDownSlider","NavButton","DropDownToggleSwich","node","singleTargetAlgorithms","multipleTargetsAlgorithms","generateMazeGraph","addPiecesOfCheese","constructGrid","reconstructGrid","WrapperCSSTransition","NUMBER_OF_COLUMNS","NUMBER_OF_ROWS","VISITED_ANIMATION_TIMEOUT","PATH_ANIMATION_TIMEOUT","firstGrid","firstStartNode","firstTargetList","firstpairGrid","mazeGraph","Visualizer","gridRef","grid","setGrid","pairGrid","setPairGrid","isVisualized","setIsVisualized","maze","setMaze","wallsDensity","setWallsDensity","mudDensity","setMudDensity","mudWeight","setMudWeight","numberOfTargets","setNumberOfTargets","shouldGenerateMaze","setShouldGenerateMaze","didMount","showNumbers","setShowNumbers","startNode","setStartNode","targetList","setTargetList","algoActiveMenu","setAlgoActiveMenu","singleTargetAlgorithm","setSingleTargetAlgorithm","multipleTargetsAlgorithm","setMultipleTargetsAlgorithm","undefined","height","setHeight","mouseIsPressed","setMouseIsPressed","visualizeSingleTargetAlgorithm","visited","path","timeout","n","length","i","setTimeout","newGrid","current","slice","x","y","isVisited","m","successor","isShortestPath","successorPosition","getSuccessorPosition","visualizeMultipleTargetsAlgorithm","allVisitedAndPathsArray","currentTimeout","handleAlgorithmChange","algorithmName","handleMenuChange","menuName","handleVisualization","allVisitedAndPaths","reinitializeGrid","generateMaze","newPairGrid","newMaze","newStartNode","newTargetList","j","toggleMultipleTargetGrid","handleChangeNumberOfTargets","val","Math","floor","handleMultipleTargets","toggleStartNode","handleMouseDown","handleMouseEnter","handleMouseUp","getVisualizeText"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport \"./Visualizer.css\";\nimport { Grid } from \"../Grid/Grid\";\nimport {\n  NavBar,\n  NavItem,\n  DropDownMenu,\n  DropDownItem,\n  DropDownSlider,\n  NavButton,\n  DropDownToggleSwich,\n} from \"../NavBar/NavBar\";\nimport { node } from \"../helperFunctions/usefulInterfaces\";\nimport {\n  singleTargetAlgorithms,\n  multipleTargetsAlgorithms,\n} from \"../helperFunctions/shortestPathAlgorithms/allAlgorithms\";\nimport { generateMazeGraph } from \"../helperFunctions/mazeGenerators/mazeGraph\";\nimport {\n  addPiecesOfCheese,\n  constructGrid,\n  reconstructGrid,\n} from \"../helperFunctions/constructGrid\";\nimport { WrapperCSSTransition } from \"../Wrapper/Wrapper\";\n\nconst NUMBER_OF_COLUMNS: number = 28;\nconst NUMBER_OF_ROWS: number = 13;\nconst VISITED_ANIMATION_TIMEOUT: number = 35;\nconst PATH_ANIMATION_TIMEOUT: number = 125;\n\n// We define these constants out of the functional component\n// that the App uses to avoid re-running the functions to create\n// these each time there is a re-render\nconst [firstGrid, firstStartNode, firstTargetList] = constructGrid(\n  NUMBER_OF_COLUMNS,\n  NUMBER_OF_ROWS,\n  [6, 3],\n  [6, 24],\n  0\n);\n\nconst [firstpairGrid, mazeGraph] = generateMazeGraph(\n  NUMBER_OF_COLUMNS,\n  NUMBER_OF_ROWS,\n  firstGrid,\n  0.3,\n  0.3,\n  2\n);\n\n// Component rendering everything in the webpage.\nconst Visualizer: React.FC = () => {\n  const gridRef = useRef(firstGrid);\n  // States managing the grid\n  const [grid, setGrid] = useState(firstGrid);\n  const [pairGrid, setPairGrid] = useState(firstpairGrid);\n  const [isVisualized, setIsVisualized] = useState(0);\n\n  // States managing the maze\n  const [maze, setMaze] = useState(mazeGraph);\n  const [wallsDensity, setWallsDensity] = useState(0.3);\n  const [mudDensity, setMudDensity] = useState(0.3);\n  const [mudWeight, setMudWeight] = useState(2);\n  const [numberOfTargets, setNumberOfTargets] = useState(1);\n  const [shouldGenerateMaze, setShouldGenerateMaze] = useState(false);\n  const didMount = useRef(false);\n  const [showNumbers, setShowNumbers] = useState(false);\n\n  // States of the start and end nodes\n  const [startNode, setStartNode] = useState(firstStartNode);\n  const [targetList, setTargetList] = useState(firstTargetList);\n\n  // States managing the dropdown menu\n  const [algoActiveMenu, setAlgoActiveMenu] = useState(\"main-single-target\");\n  const [singleTargetAlgorithm, setSingleTargetAlgorithm] = useState(\n    \"Dijkstra's algorithm\"\n  );\n  const [multipleTargetsAlgorithm, setMultipleTargetsAlgorithm] = useState(\n    \"Nearest Neighbors (Greedy)\"\n  );\n  const [height, setHeight] = useState(undefined);\n\n  // State of the mouse\n  const [mouseIsPressed, setMouseIsPressed] = useState(false);\n\n  // This function is there to visualize the algorithm chosen in the drop down menu\n  const visualizeSingleTargetAlgorithm: (\n    visited: node[],\n    path: node[],\n    timeout: number\n  ) => number = (visited, path, timeout) => {\n    const n = visited.length;\n    for (let i: number = 0; i < n; i++) {\n      setTimeout(() => {\n        const newGrid: node[][] = gridRef.current.slice();\n        const node: node = visited[i];\n        // define the x and y of the current node\n        const x: number = node.x;\n        const y: number = node.y;\n        newGrid[x][y] = {\n          ...gridRef.current[x][y],\n          isVisited: true,\n        };\n        setGrid(newGrid);\n      }, timeout + VISITED_ANIMATION_TIMEOUT * i);\n    }\n\n    const m = path.length;\n    for (let i: number = 0; i < m; i++) {\n      setTimeout(() => {\n        const newGrid: node[][] = gridRef.current.slice();\n        let successor: node = i < m - 1 ? path[i + 1] : path[i];\n        const node: node = path[i];\n        // define the x and y of the current node\n        const x: number = node.x;\n        const y: number = node.y;\n\n        newGrid[x][y] = {\n          ...gridRef.current[x][y],\n          isShortestPath: true,\n          isVisited: false,\n          successorPosition: getSuccessorPosition(node, successor),\n        };\n        setGrid(newGrid);\n      }, timeout + VISITED_ANIMATION_TIMEOUT * n + PATH_ANIMATION_TIMEOUT * i + 500);\n    }\n    return timeout + VISITED_ANIMATION_TIMEOUT * n + PATH_ANIMATION_TIMEOUT * m;\n  };\n\n  // This function returns the position of the successor of a node in the shortest path\n  const getSuccessorPosition: (node: node, successor: node) => string = (\n    node,\n    successor\n  ) => {\n    if (node.x + 1 === successor.x) return \"D\";\n    if (node.y + 1 === successor.y) return \"R\";\n    if (node.x - 1 === successor.x) return \"U\";\n    if (node.y - 1 === successor.y) return \"L\";\n    return \"\";\n  };\n\n  // This function is there to visualize multipleTargetsAlgorithms\n  const visualizeMultipleTargetsAlgorithm: (\n    allVisitedAndPathsArray: [node[], node[]][]\n  ) => number = (allVisitedAndPathsArray) => {\n    let n: number = allVisitedAndPathsArray.length;\n    let currentTimeout: number = 0;\n    for (let i: number = 0; i < n; i++) {\n      const [visited, path] = allVisitedAndPathsArray[i];\n      currentTimeout = visualizeSingleTargetAlgorithm(\n        visited,\n        path,\n        currentTimeout\n      );\n\n      currentTimeout += 1250;\n      setTimeout(() => {\n        const newGrid: node[][] = gridRef.current.slice();\n        for (let x: number = 0; x < newGrid.length; x++) {\n          for (let y: number = 0; y < newGrid[0].length; y++) {\n            newGrid[x][y] = {\n              ...gridRef.current[x][y],\n              isVisited: false,\n            };\n          }\n        }\n        setGrid(newGrid);\n      }, currentTimeout);\n      currentTimeout += 1000;\n    }\n    return currentTimeout;\n  };\n\n  // This function is passed to the drop down menu to handle the change of algorithm\n  const handleAlgorithmChange: (algorithmName: string) => () => void = (\n    algorithmName\n  ) => {\n    return () => {\n      numberOfTargets > 1\n        ? setMultipleTargetsAlgorithm(algorithmName)\n        : setSingleTargetAlgorithm(algorithmName);\n    };\n  };\n\n  // This function handles the click on the menu buttons\n  const handleMenuChange: (menuName: string) => () => void = (menuName) => {\n    return () => setAlgoActiveMenu(menuName);\n  };\n\n  // This function handles the logic of the visualization of the algorithms\n  const handleVisualization: () => void = () => {\n    if (isVisualized === 0) {\n      setIsVisualized(1);\n      if (numberOfTargets === 1) {\n        const [visited, path]: [node[], node[]] = singleTargetAlgorithms[\n          singleTargetAlgorithm\n        ](grid, pairGrid, maze, startNode, targetList);\n        const n: number = visited.length,\n          m: number = path.length;\n        visualizeSingleTargetAlgorithm(visited, path, 0);\n        setTimeout(() => {\n          setIsVisualized(2);\n        }, VISITED_ANIMATION_TIMEOUT * n + PATH_ANIMATION_TIMEOUT * m + 1250);\n        return;\n      }\n      const allVisitedAndPaths: [node[], node[]][] = multipleTargetsAlgorithms[\n        multipleTargetsAlgorithm\n      ](grid, pairGrid, maze, startNode, targetList.slice());\n      const timeout: number = visualizeMultipleTargetsAlgorithm(\n        allVisitedAndPaths\n      );\n      setTimeout(() => {\n        setIsVisualized(2);\n      }, timeout);\n    }\n    if (isVisualized === 2) {\n      reinitializeGrid();\n    }\n  };\n\n  // This function calls the generate maze function\n  const generateMaze: () => void = () => {\n    if (isVisualized === 0) {\n      const [newPairGrid, newMaze] = generateMazeGraph(\n        NUMBER_OF_COLUMNS,\n        NUMBER_OF_ROWS,\n        grid,\n        wallsDensity,\n        mudDensity,\n        mudWeight\n      );\n      setPairGrid(newPairGrid);\n      setMaze(newMaze);\n      setShouldGenerateMaze(false);\n    }\n  };\n\n  // Reinitialize the the board\n  const reinitializeGrid: () => void = () => {\n    if (isVisualized !== 1) {\n      const [newGrid, newStartNode, newTargetList] = reconstructGrid(\n        NUMBER_OF_COLUMNS,\n        NUMBER_OF_ROWS,\n        [startNode.x, startNode.y],\n        targetList\n      );\n      for (let i: number = 0; i < newGrid.length; i++) {\n        for (let j: number = 0; j < newGrid[0].length; j++) {\n          gridRef.current[i][j] = newGrid[i][j];\n        }\n      }\n      setGrid(newGrid);\n      setStartNode(newStartNode);\n      setTargetList(newTargetList);\n      setIsVisualized(0);\n    }\n  };\n\n  // toggles on and off the multiple targets\n  const toggleMultipleTargetGrid: () => void = () => {\n    if (isVisualized !== 1) {\n      let newGrid, newStartNode, newTargetList;\n      if (numberOfTargets > 1) {\n        [newGrid, newStartNode, newTargetList] = addPiecesOfCheese(\n          NUMBER_OF_COLUMNS,\n          NUMBER_OF_ROWS,\n          startNode,\n          targetList,\n          numberOfTargets - targetList.length\n        );\n        for (let i: number = 0; i < newGrid.length; i++) {\n          for (let j: number = 0; j < newGrid[0].length; j++) {\n            gridRef.current[i][j] = newGrid[i][j];\n          }\n        }\n      } else {\n        [newGrid, newStartNode, newTargetList] = constructGrid(\n          NUMBER_OF_COLUMNS,\n          NUMBER_OF_ROWS,\n          [startNode.x, startNode.y],\n          [6, 24],\n          0\n        );\n      }\n      setGrid(newGrid);\n      setStartNode(newStartNode);\n      setTargetList(newTargetList);\n      setIsVisualized(0);\n    }\n  };\n\n  // If the value of multipleTargets change, call the reinitialize function\n  useEffect(toggleMultipleTargetGrid, [numberOfTargets]);\n\n  // handle the change of the number of targets\n  const handleChangeNumberOfTargets: (val: number) => void = (val) => {\n    setNumberOfTargets(Math.floor(val));\n  };\n\n  // handle the click on the multiple targets button\n  const handleMultipleTargets: () => void = () => {\n    if (isVisualized === 0) {\n      setAlgoActiveMenu(\n        numberOfTargets > 1 ? \"main-single-target\" : \"main-multiple-target\"\n      );\n      setNumberOfTargets(numberOfTargets > 1 ? 1 : 5);\n    }\n  };\n\n  // toggle the start node in the grid\n  const toggleStartNode: (x: number, y: number) => void = (x, y) => {\n    const [newGrid, newStartNode, newTargetList] = reconstructGrid(\n      NUMBER_OF_COLUMNS,\n      NUMBER_OF_ROWS,\n      [x, y],\n      targetList\n    );\n    for (let x: number = 0; x < newGrid.length; x++) {\n      for (let y: number = 0; y < newGrid[0].length; y++) {\n        gridRef.current[x][y] = newGrid[x][y];\n      }\n    }\n    setStartNode(newStartNode);\n    setTargetList(newTargetList);\n    setGrid(newGrid);\n  };\n\n  // handles the case when the mouse button is down\n  const handleMouseDown: (x: number, y: number) => void = (x, y) => {\n    if (grid[x][y] === startNode) {\n      setMouseIsPressed(true);\n    }\n  };\n\n  // handles the case whan the mouse button is down and you enter a node\n  const handleMouseEnter: (x: number, y: number) => void = (x, y) => {\n    if (mouseIsPressed) {\n      toggleStartNode(x, y);\n    }\n  };\n\n  // handles the case when you mouse up\n  const handleMouseUp: () => void = () => {\n    setMouseIsPressed(false);\n  };\n\n  // function that returns the text in the visualization button\n  const getVisualizeText: () => string = () => {\n    if (isVisualized <= 0)\n      return (\n        \"Visualize \" +\n        (numberOfTargets > 1\n          ? multipleTargetsAlgorithm\n          : singleTargetAlgorithm) +\n        \"!\"\n      );\n    return \"Reinitialize Visualization\";\n  };\n\n  // updates the maze in real time\n  useEffect(() => {\n    if (didMount.current) setShouldGenerateMaze(true);\n    else didMount.current = true;\n  }, [wallsDensity, mudDensity, mudWeight]);\n\n  // Render the app\n  return (\n    <div className=\"App\" onMouseUp={() => handleMouseUp()}>\n      <NavBar>\n        <NavButton\n          text=\"Generate New Maze\"\n          isVisualized={isVisualized}\n          className={\n            \"generate-maze \" + (shouldGenerateMaze ? \"should-generate\" : \"\")\n          }\n          visualizingClassName=\"greyed-out\"\n          visualizedClassName=\"greyed-out\"\n          handleClick={generateMaze}\n        />\n        <NavItem\n          text=\"Maze options\"\n          id=\"maze-options\"\n          isVisualized={isVisualized}\n          shouldGreyOut={true}\n        >\n          <DropDownMenu left={true}>\n            <DropDownSlider\n              text=\"Density of walls\"\n              minValue={0}\n              maxValue={1}\n              step={0.01}\n              defaultValue={wallsDensity}\n              handleChange={setWallsDensity}\n            ></DropDownSlider>\n            <DropDownSlider\n              text=\"Density of mud\"\n              minValue={0}\n              maxValue={1}\n              step={0.01}\n              defaultValue={mudDensity}\n              handleChange={setMudDensity}\n            ></DropDownSlider>\n            <DropDownSlider\n              text=\"Mud Weight\"\n              minValue={1.1}\n              maxValue={3}\n              step={0.1}\n              defaultValue={mudWeight}\n              handleChange={setMudWeight}\n            ></DropDownSlider>\n            <DropDownToggleSwich\n              text=\"Show Mud Weights ?\"\n              shouldShowWeights={showNumbers}\n              handleChange={() => setShowNumbers(!showNumbers)}\n            />\n            {numberOfTargets > 1 && (\n              <DropDownSlider\n                text=\"Number of Targets\"\n                minValue={2}\n                maxValue={10}\n                step={1}\n                defaultValue={numberOfTargets}\n                handleChange={handleChangeNumberOfTargets}\n              ></DropDownSlider>\n            )}\n          </DropDownMenu>\n        </NavItem>\n        <NavButton\n          text={getVisualizeText()}\n          isVisualized={isVisualized}\n          className=\"visualize-button\"\n          visualizingClassName=\"greyed-out highlight\"\n          visualizedClassName=\"highlight\"\n          handleClick={handleVisualization}\n        />\n        <NavButton\n          text={\n            (numberOfTargets > 1 ? \"Disable\" : \"Enable\") + \" Multiple Targets\"\n          }\n          isVisualized={isVisualized}\n          className={\n            numberOfTargets > 1\n              ? \"disable-multiple-targets\"\n              : \"enable-multiple-targets\"\n          }\n          visualizingClassName=\"greyed-out\"\n          visualizedClassName=\"greyed-out\"\n          handleClick={handleMultipleTargets}\n        />\n        <NavItem\n          text=\"Algorithms\"\n          id=\"algorithms\"\n          isVisualized={isVisualized}\n          shouldGreyOut={false}\n        >\n          <DropDownMenu height={height}>\n            <WrapperCSSTransition\n              in={algoActiveMenu === \"main-single-target\"}\n              unmountOnExit\n              timeout={500}\n              classNames=\"menu-primary\"\n              handleEnter={setHeight}\n              appear\n            >\n              <DropDownItem handleClick={handleMenuChange(\"unweighted\")}>\n                Algorithms for unweighted graphs\n              </DropDownItem>\n              <DropDownItem handleClick={handleMenuChange(\"weighted\")}>\n                Algorithms for weighted graphs\n              </DropDownItem>\n            </WrapperCSSTransition>\n            <WrapperCSSTransition\n              in={algoActiveMenu === \"unweighted\"}\n              unmountOnExit\n              timeout={500}\n              classNames=\"menu-unweighted\"\n              handleEnter={setHeight}\n            >\n              <DropDownItem\n                handleClick={handleMenuChange(\"main-single-target\")}\n              >\n                {\"<<<\"}\n              </DropDownItem>\n              <DropDownItem\n                handleClick={handleAlgorithmChange(\"Depth First Search\")}\n              >\n                <p>Random Depth First Search</p>\n                {singleTargetAlgorithm === \"Depth First Search\" ? <p>✓</p> : \"\"}\n              </DropDownItem>\n              <DropDownItem\n                handleClick={handleAlgorithmChange(\"Breadth First Search\")}\n              >\n                <p>Breadth First Search</p>\n                {singleTargetAlgorithm === \"Breadth First Search\" ? (\n                  <p>✓</p>\n                ) : (\n                  \"\"\n                )}\n              </DropDownItem>\n            </WrapperCSSTransition>\n            <WrapperCSSTransition\n              in={algoActiveMenu === \"weighted\"}\n              unmountOnExit\n              timeout={500}\n              classNames=\"menu-weighted\"\n              handleEnter={setHeight}\n            >\n              <DropDownItem\n                handleClick={handleMenuChange(\"main-single-target\")}\n              >\n                {\"<<<\"}\n              </DropDownItem>\n              <DropDownItem\n                handleClick={handleAlgorithmChange(\"Dijkstra's algorithm\")}\n              >\n                <p>Dijkstra's Algorithm</p>\n                {singleTargetAlgorithm === \"Dijkstra's algorithm\" ? (\n                  <p>✓</p>\n                ) : (\n                  \"\"\n                )}\n              </DropDownItem>\n              <DropDownItem handleClick={handleAlgorithmChange(\"A* algorithm\")}>\n                <p>A* Algorithm</p>\n                {singleTargetAlgorithm === \"A* algorithm\" ? <p>✓</p> : \"\"}\n              </DropDownItem>\n            </WrapperCSSTransition>\n            <WrapperCSSTransition\n              in={algoActiveMenu === \"main-multiple-target\"}\n              unmountOnExit\n              timeout={500}\n              classNames=\"menu-unweighted\"\n              handleEnter={setHeight}\n            >\n              <DropDownItem\n                handleClick={handleAlgorithmChange(\n                  \"Nearest Neighbors (Greedy)\"\n                )}\n              >\n                <p>Nearest Neighbors (Greedy)</p>\n                {multipleTargetsAlgorithm === \"Nearest Neighbors (Greedy)\" ? (\n                  <p>✓</p>\n                ) : (\n                  \"\"\n                )}\n              </DropDownItem>\n            </WrapperCSSTransition>\n          </DropDownMenu>\n        </NavItem>\n      </NavBar>\n\n      <Grid\n        grid={grid}\n        pairGrid={pairGrid}\n        maze={maze}\n        mouseState={mouseIsPressed}\n        handleMouseDown={handleMouseDown}\n        handleMouseEnter={handleMouseEnter}\n        showNumbers={showNumbers}\n      />\n    </div>\n  );\n};\n\nexport default Visualizer;\n"]},"metadata":{},"sourceType":"module"}